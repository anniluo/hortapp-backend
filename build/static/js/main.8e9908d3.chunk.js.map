{"version":3,"sources":["components/natureResourcePopup/natureResourcePopup.js","components/natureResourceMarker/natureResourceMarker.js","components/button/buttonComponent.js","components/modal/modalToggleComponent.js","services/login.js","services/signup.js","services/resourceMarkers.js","services/users.js","components/modal/modalComponent.js","components/menu/menuComponent.js","components/dropdownMenu/dropdownMenuComponent.js","services/natureResources.js","components/addMarkerModal/addMarkerModalComponent.js","components/map/mapComponent.js","App.js","index.js","utils/errorHandler.js"],"names":["NatureResourcePopup","resourceMarker","Popup","className","src","natureResource","iconUrl","alt","id","name","en","harvestSeason","start","end","locationName","addedByUser","username","date","slice","comment","NatureResourceMarker","marker","userId","selectedFilterOptions","includes","category","toLowerCase","Marker","key","position","latLng","latitude","longitude","LeafletControlButton","buttonPosition","toolTipText","buttonId","buttonOnClick","onClick","ModalToggle","toggle","content","useState","modalIsOpen","setModalIsOpen","toggleModalBackground","modalBackground","document","getElementById","classList","contains","remove","add","login","credentials","a","axios","post","response","data","signup","newUserObject","token","getAll","get","then","create","newMarkerObject","config","headers","Authorization","update","put","setToken","newToken","user","window","sessionStorage","setItem","JSON","stringify","removeItem","getItem","Modal","modalHeaderText","hideModalOnClick","formId","handleUserChange","errorMessage","setErrorMessage","successMessage","setSuccessMessage","setUsername","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","useEffect","checkOtherOpenModals","closeModalButton","getElementsByClassName","length","click","handleLogin","event","preventDefault","error","message","handleError","setTimeout","loginService","userService","resourceMarkerService","handleSignup","signupService","ReactDOM","createPortal","onSubmit","type","placeholder","value","onChange","target","HortappMenu","menuIsOpen","onMenuButtonClick","handleFilterOptionsChange","checked","htmlFor","showModal","hideModal","Dropdownmenu","dropdownMenuIsOpen","handleDropdownMenuToggle","handleResourceChange","resources","chosenResource","map","resource","AddResourceModal","chosenLocation","updateMarkers","handleAddMarkerModeChange","natureResources","setNatureResources","setDropdownMenuIsOpen","setLocationName","setComment","setChosenResource","getNatureResources","natureResourceService","handleAddMarker","lat","long","Date","now","hidden","LeafletMap","mapRef","useRef","markerRef","setUser","setMenuIsOpen","addMarkerModeIsOn","setAddMarkerModeIsOn","resourceMarkers","setResourceMarkers","mapMaxBounds","mapZoom","setMapZoom","mapPosition","setMapPosition","setChosenLocation","setSelectedFilterOptions","getResourceMarkers","loggedInUser","parse","newFilter","updatedOptions","filter","option","concat","closeLastOpenedPopup","current","leafletElement","closePopup","markers","alert","toggleMarkerPointerEvents","i","style","pointerEvents","getDeviceLocation","navigator","geolocation","getCurrentPosition","coords","getCurrentZoomLevel","emptyChosenLocation","getZoom","Map","maxBounds","center","zoom","minZoom","maxZoom","zoomControl","latlng","lng","openPopup","confirmationPopupToggle","ref","ZoomControl","TileLayer","attribution","url","closeButton","closeOnClick","App","render","module","exports","errors","push"],"mappings":"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","file":"static/js/main.8e9908d3.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Popup } from 'react-leaflet';\r\nimport './natureResourcePopup.css';\r\n\r\nconst NatureResourcePopup = ({ resourceMarker }) => {\r\n  const reformatDate = (date) => {\r\n    return date.slice(0, 10);\r\n  };\r\n\r\n  return (\r\n    <Popup className='popup-container'>\r\n      <div className='popup-header-container'>\r\n        <img\r\n          className='resource-icon'\r\n          src={resourceMarker.natureResource.iconUrl}\r\n          alt='Icon for resource'\r\n        />\r\n        <h5 id='nature-resource-name'>{resourceMarker.natureResource.name.en} </h5>\r\n        <p id='harvest-info'>\r\n          From: <b>{resourceMarker.natureResource.harvestSeason.start}</b>\r\n          <br></br>\r\n          To: <b>{resourceMarker.natureResource.harvestSeason.end}</b>\r\n        </p>\r\n      </div>\r\n      <div className='popup-info-container'>\r\n        <h5 id='address-text'>\r\n          <b>{resourceMarker.locationName}</b>\r\n        </h5>\r\n        <p id='date-user-info-text'>\r\n          Added by <b>{resourceMarker.addedByUser.username}</b> on:{' '}\r\n          <b>{reformatDate(resourceMarker.date)}</b>\r\n        </p>\r\n        {resourceMarker.comment && <p id='user-comment-text'>{resourceMarker.comment}</p>}\r\n      </div>\r\n    </Popup>\r\n  );\r\n};\r\n\r\nexport default NatureResourcePopup;\r\n","import React from 'react';\r\nimport { Marker } from 'react-leaflet';\r\nimport NatureResourcePopup from '../natureResourcePopup/natureResourcePopup';\r\n\r\nconst NatureResourceMarker = ({ marker, userId, selectedFilterOptions }) => {\r\n  const renderMarker = () => {\r\n    if (selectedFilterOptions.includes(marker.natureResource.category.toLowerCase())) {\r\n      return (\r\n        <Marker key={marker.id} position={[marker.latLng.latitude, marker.latLng.longitude]}>\r\n          <NatureResourcePopup resourceMarker={marker} />\r\n        </Marker>\r\n      );\r\n    } else if (userId !== null) {\r\n      if (marker.addedByUser.id === userId && selectedFilterOptions.includes('myMarkers')) {\r\n        return (\r\n          <Marker key={marker.id} position={[marker.latLng.latitude, marker.latLng.longitude]}>\r\n            <NatureResourcePopup resourceMarker={marker} />\r\n          </Marker>\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  return <>{renderMarker()}</>;\r\n};\r\n\r\nexport default NatureResourceMarker;\r\n","import React from 'react';\r\nimport Control from 'react-leaflet-control';\r\nimport './buttonComponent.css';\r\n\r\nconst LeafletControlButton = ({ buttonPosition, toolTipText, buttonId, buttonOnClick }) => {\r\n  return (\r\n    <Control position={buttonPosition}>\r\n      <button onClick={buttonOnClick} className='round-button tooltip' id={buttonId}>\r\n        <span className='tooltiptext'> {toolTipText}</span>\r\n      </button>\r\n    </Control>\r\n  );\r\n};\r\n\r\nexport default LeafletControlButton;\r\n","import React, { useState } from 'react';\r\nimport './modalComponent.css';\r\n\r\nconst ModalToggle = ({ toggle, content }) => {\r\n  const [modalIsOpen, setModalIsOpen] = useState(false);\r\n\r\n  const hideModal = () => {\r\n    toggleModalBackground();\r\n    setModalIsOpen(false);\r\n  };\r\n  const showModal = () => {\r\n    toggleModalBackground();\r\n    setModalIsOpen(true);\r\n  };\r\n\r\n  const toggleModalBackground = () => {\r\n    const modalBackground = document.getElementById('modal-background');\r\n\r\n    modalBackground.classList.contains('hidden-modal-background')\r\n      ? modalBackground.classList.remove('hidden-modal-background')\r\n      : modalBackground.classList.add('hidden-modal-background');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {toggle(showModal)}\r\n      {modalIsOpen && content(hideModal)}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalToggle;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/login';\r\n\r\nconst login = async (credentials) => {\r\n  const response = await axios.post(baseUrl, credentials);\r\n  return response.data;\r\n};\r\n\r\nexport default { login };\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/signup';\r\n\r\nconst signup = async (newUserObject) => {\r\n  const response = await axios.post(baseUrl, newUserObject);\r\n  return response.data;\r\n};\r\n\r\nexport default { signup };\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/resourceMarkers';\r\n\r\nlet token = null;\r\n\r\nconst setToken = (newToken) => {\r\n  token = `bearer ${newToken}`;\r\n};\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = async (newMarkerObject) => {\r\n  const config = {\r\n    headers: { Authorization: token },\r\n  };\r\n\r\n  const response = await axios.post(baseUrl, newMarkerObject, config);\r\n  return response.data;\r\n};\r\n\r\nconst update = (id, newMarkerObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newMarkerObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, update, setToken };\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/users';\r\n\r\nconst setToStorage = (key, user) => {\r\n  window.sessionStorage.setItem(key, JSON.stringify(user));\r\n};\r\n\r\nconst getFromStorage = (key) => {\r\n  return window.sessionStorage.getItem(key);\r\n};\r\n\r\nconst clearStorage = (key) => {\r\n  window.sessionStorage.removeItem(key);\r\n};\r\n\r\nconst getOneWith = (id) => {\r\n  const request = axios.get(`${baseUrl}/${id}`);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst update = (id, newUserObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newUserObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getOneWith, update, setToStorage, clearStorage, getFromStorage };\r\n","import React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport loginService from '../../services/login';\r\nimport signupService from '../../services/signup';\r\nimport resourceMarkerService from '../../services/resourceMarkers';\r\nimport userService from '../../services/users';\r\nimport './modalComponent.css';\r\nimport { handleError } from '../../utils/errorHandler';\r\n\r\nconst Modal = ({ modalHeaderText, hideModalOnClick, formId, handleUserChange }) => {\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [successMessage, setSuccessMessage] = useState(null);\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n\r\n  useEffect(() => {\r\n    checkOtherOpenModals();\r\n  }, []);\r\n\r\n  const checkOtherOpenModals = () => {\r\n    const closeModalButton = document.getElementsByClassName('close-modal-button');\r\n    if (closeModalButton.length > 1) {\r\n      closeModalButton[0].click();\r\n    }\r\n  };\r\n\r\n  const handleLogin = async (event) => {\r\n    event.preventDefault();\r\n    let error = '';\r\n\r\n    if (username === '' || password === '') {\r\n      error = { message: 'Missing Username or Password' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const user = await loginService.login({ username, password });\r\n      userService.setToStorage('loggedHortappUser', user);\r\n      resourceMarkerService.setToken(user.token);\r\n\r\n      setUsername('');\r\n      setPassword('');\r\n\r\n      hideModalOnClick();\r\n      handleUserChange(user);\r\n    } catch (error) {\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handleSignup = async (event) => {\r\n    event.preventDefault();\r\n    let error = '';\r\n\r\n    if (email === '' || username === '' || password === '') {\r\n      error = { message: 'Missing Username, Password or Email' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    if (username.length < 4 || password.length < 8) {\r\n      error = { message: 'Short Username or Password' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    if (confirmPassword !== password) {\r\n      error = { message: 'Incorrect Match' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await signupService.signup({\r\n        email: email,\r\n        username: username,\r\n        password: password,\r\n      });\r\n\r\n      setEmail('');\r\n      setUsername('');\r\n      setPassword('');\r\n      setConfirmPassword('');\r\n\r\n      setSuccessMessage('Account created succesfully!');\r\n    } catch (error) {\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const renderErrorMessage = () => {\r\n    return errorMessage !== null ? (\r\n      <div className='modal-error-container'>\r\n        <p className='error-message-text'>{errorMessage}</p>\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  const renderSuccessMessage = () => {\r\n    return successMessage !== null ? (\r\n      <div className='modal-success-container'>\r\n        <p className='success-message-text'>{successMessage}</p>\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  return ReactDOM.createPortal(\r\n    <>\r\n      <div className='modal-container'>\r\n        <div className='modal-header-container'>\r\n          <h5>{modalHeaderText}</h5>\r\n          <button className='close-modal-button no-border' onClick={hideModalOnClick}></button>\r\n        </div>\r\n        {formId !== '' ? (\r\n          <>\r\n            {renderSuccessMessage()}\r\n            {renderErrorMessage()}\r\n            <form\r\n              id={formId}\r\n              className='modal-form'\r\n              onSubmit={formId === 'login-form' ? handleLogin : handleSignup}\r\n            >\r\n              <input\r\n                className={formId === 'login-form' ? 'hidden form-input' : 'form-input'}\r\n                type='email'\r\n                placeholder='e-mail'\r\n                value={email}\r\n                onChange={({ target }) => setEmail(target.value)}\r\n              />\r\n              <input\r\n                className='form-input'\r\n                type='text'\r\n                placeholder='username'\r\n                value={username}\r\n                onChange={({ target }) => setUsername(target.value)}\r\n              />\r\n              <input\r\n                className='form-input'\r\n                type='password'\r\n                placeholder='password'\r\n                value={password}\r\n                onChange={({ target }) => setPassword(target.value)}\r\n              />\r\n              <input\r\n                className={formId === 'login-form' ? 'hidden form-input' : 'form-input'}\r\n                type='password'\r\n                placeholder='confirm password'\r\n                value={confirmPassword}\r\n                onChange={({ target }) => setConfirmPassword(target.value)}\r\n              />\r\n              <input className='modal-form-submit' type='submit' value='Confirm' />\r\n            </form>\r\n          </>\r\n        ) : (\r\n          <div className='about-app-container'>\r\n            Hortapp is a map application to mark locations of different types of nature resources.\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>,\r\n    document.getElementById('modal-root')\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport Control from 'react-leaflet-control';\r\nimport './menuComponent.css';\r\nimport ModalToggle from '../modal/modalToggleComponent';\r\nimport Modal from '../modal/modalComponent';\r\nimport userService from '../../services/users';\r\n\r\nconst HortappMenu = ({\r\n  menuIsOpen,\r\n  onMenuButtonClick,\r\n  user,\r\n  handleUserChange,\r\n  selectedFilterOptions,\r\n  handleFilterOptionsChange,\r\n}) => {\r\n  const handleLogout = (event) => {\r\n    event.preventDefault();\r\n    userService.clearStorage('loggedHortappUser');\r\n    handleUserChange(null);\r\n  };\r\n\r\n  const renderMapFilter = () => {\r\n    return (\r\n      <div className='filter-container'>\r\n        <p>Filter Options</p>\r\n        <div className='filter-options-container'>\r\n          {user !== null ? (\r\n            <>\r\n              <input\r\n                type='checkbox'\r\n                name='my-markers'\r\n                id='my-markers-filter'\r\n                value='myMarkers'\r\n                onChange={(event) => handleFilterOptionsChange(event.target.value)}\r\n                checked={selectedFilterOptions.includes('myMarkers')}\r\n              />\r\n              <label htmlFor='my-markers'>My markers</label>\r\n            </>\r\n          ) : null}\r\n          <input\r\n            type='checkbox'\r\n            name='berries'\r\n            id='berries-filter'\r\n            value='berries'\r\n            onChange={(event) => handleFilterOptionsChange(event.target.value)}\r\n            checked={selectedFilterOptions.includes('berries')}\r\n          />\r\n          <label htmlFor='berries'>Berries</label>\r\n          <input\r\n            type='checkbox'\r\n            name='mushrooms'\r\n            id='mushrooms-filter'\r\n            value='mushrooms'\r\n            onChange={(event) => handleFilterOptionsChange(event.target.value)}\r\n            checked={selectedFilterOptions.includes('mushrooms')}\r\n          />\r\n          <label htmlFor='mushrooms'>Mushrooms</label>\r\n          <input\r\n            type='checkbox'\r\n            name='greens'\r\n            id='greens-filter'\r\n            value='greens'\r\n            onChange={(event) => handleFilterOptionsChange(event.target.value)}\r\n            checked={selectedFilterOptions.includes('greens')}\r\n          />\r\n          <label htmlFor='greens'>Greens</label>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return menuIsOpen ? (\r\n    <div className='menu-container'>\r\n      <div className='menu-header-container'>\r\n        <h4 className='menu-header-text' onClick={onMenuButtonClick}>\r\n          Hortapp\r\n        </h4>\r\n        <button onClick={onMenuButtonClick} className='menu-button menu-open-icon'></button>\r\n        {user && (\r\n          <p>\r\n            Logged in as <b>{user.username}</b>\r\n          </p>\r\n        )}\r\n      </div>\r\n\r\n      <div className='menu-contents'>\r\n        {renderMapFilter()}\r\n        {user === null ? (\r\n          <>\r\n            <ModalToggle\r\n              toggle={(showModal) => (\r\n                <button className='full-button square-button no-border' onClick={showModal}>\r\n                  Log in\r\n                </button>\r\n              )}\r\n              content={(hideModal) => (\r\n                <Modal\r\n                  modalHeaderText='Login to Hortapp'\r\n                  hideModalOnClick={hideModal}\r\n                  formId='login-form'\r\n                  user={user}\r\n                  handleUserChange={handleUserChange}\r\n                />\r\n              )}\r\n            />\r\n            <ModalToggle\r\n              toggle={(showModal) => (\r\n                <button className='full-button square-button no-border' onClick={showModal}>\r\n                  Sign up\r\n                </button>\r\n              )}\r\n              content={(hideModal) => (\r\n                <Modal\r\n                  modalHeaderText='Signup to Hortapp'\r\n                  hideModalOnClick={hideModal}\r\n                  formId='signup-form'\r\n                />\r\n              )}\r\n            />\r\n          </>\r\n        ) : (\r\n          <button className='full-button square-button no-border' onClick={handleLogout}>\r\n            Log out\r\n          </button>\r\n        )}\r\n\r\n        <ModalToggle\r\n          toggle={(showModal) => (\r\n            <button className='full-button square-button no-border' onClick={showModal}>\r\n              About\r\n            </button>\r\n          )}\r\n          content={(hideModal) => (\r\n            <Modal modalHeaderText='About Hortapp' hideModalOnClick={hideModal} formId='' />\r\n          )}\r\n        />\r\n      </div>\r\n    </div>\r\n  ) : (\r\n    <Control position='topleft'>\r\n      <button onClick={onMenuButtonClick} className='menu-button menu-closed-icon'></button>\r\n    </Control>\r\n  );\r\n};\r\n\r\nexport default HortappMenu;\r\n","import React from 'react';\r\nimport './dropdownMenuComponent.css';\r\n\r\nconst Dropdownmenu = ({\r\n  dropdownMenuIsOpen,\r\n  handleDropdownMenuToggle,\r\n  handleResourceChange,\r\n  resources,\r\n  chosenResource,\r\n}) => {\r\n  const renderResourcesButtons = () => {\r\n    return dropdownMenuIsOpen && resources\r\n      ? resources.map((resource) => (\r\n          <button\r\n            className='resource-button'\r\n            key={resource.id}\r\n            onClick={() => {\r\n              handleResourceChange(resource);\r\n            }}\r\n          >\r\n            {resource.name.en}\r\n          </button>\r\n        ))\r\n      : null;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className='dropdown-container'>\r\n        <button className='dropdown-menu-button square-button' onClick={handleDropdownMenuToggle}>\r\n          <i className='fa fa-caret-down'></i>\r\n        </button>\r\n        <p className='resource-name'>{chosenResource.name}</p>\r\n      </div>\r\n      <div className='dropdown-content'>{renderResourcesButtons()}</div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dropdownmenu;\r\n","import axios from 'axios';\r\nconst baseUrl = '/api/natureResources';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll };\r\n","import React, { useState, useEffect } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './addMarkerModalComponent.css';\r\nimport '../modal/modalComponent.css';\r\nimport Dropdownmenu from '../dropdownMenu/dropdownMenuComponent';\r\nimport natureResourceService from '../../services/natureResources';\r\nimport resourceMarkerService from '../../services/resourceMarkers';\r\nimport { handleError } from '../../utils/errorHandler';\r\n\r\nconst AddResourceModal = ({\r\n  hideModalOnClick,\r\n  chosenLocation,\r\n  user,\r\n  updateMarkers,\r\n  handleAddMarkerModeChange,\r\n}) => {\r\n  const [errorMessage, setErrorMessage] = useState(null);\r\n  const [natureResources, setNatureResources] = useState(null);\r\n  const [dropdownMenuIsOpen, setDropdownMenuIsOpen] = useState(false);\r\n  const [locationName, setLocationName] = useState('');\r\n  const [comment, setComment] = useState('');\r\n  const [chosenResource, setChosenResource] = useState({ name: '', id: '' });\r\n\r\n  useEffect(() => {\r\n    getNatureResources();\r\n  }, []);\r\n\r\n  const getNatureResources = async () => {\r\n    try {\r\n      const resources = await natureResourceService.getAll();\r\n      setNatureResources(resources);\r\n    } catch (error) {\r\n      handleError(error);\r\n      setErrorMessage('Error occured while trying to fetch resources');\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const handleResourceChange = (resource) => {\r\n    setChosenResource({ name: resource.name.en, id: resource.id });\r\n    setDropdownMenuIsOpen(false);\r\n  };\r\n\r\n  const handleDropdownMenuToggle = (event) => {\r\n    event.preventDefault();\r\n    setDropdownMenuIsOpen(!dropdownMenuIsOpen);\r\n  };\r\n\r\n  const handleAddMarker = async (event) => {\r\n    event.preventDefault();\r\n    let error = '';\r\n\r\n    if (locationName === '' || chosenResource.id === '') {\r\n      error = { message: 'Missing Address or Resource' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    if (locationName.length < 6) {\r\n      error = { message: 'Short Address' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    if (comment.length <= 10 && comment.length > 0) {\r\n      error = { message: 'Short Comment' };\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await resourceMarkerService.create({\r\n        latLng: { latitude: chosenLocation.lat, longitude: chosenLocation.long },\r\n        locationName: locationName,\r\n        date: Date.now(),\r\n        userId: user.id,\r\n        comment: comment,\r\n        natureResource: chosenResource.id,\r\n      });\r\n\r\n      setLocationName('');\r\n      handleResourceChange(natureResources[0]);\r\n      setComment('');\r\n\r\n      updateMarkers();\r\n      hideModalOnClick();\r\n      handleAddMarkerModeChange();\r\n    } catch (error) {\r\n      setErrorMessage(handleError(error));\r\n      setTimeout(() => {\r\n        setErrorMessage(null);\r\n      }, 5000);\r\n    }\r\n  };\r\n\r\n  const renderErrorMessage = () => {\r\n    return errorMessage !== null ? (\r\n      <div className='modal-error-container'>\r\n        <p className='error-message-text'>{errorMessage}</p>\r\n      </div>\r\n    ) : null;\r\n  };\r\n\r\n  return ReactDOM.createPortal(\r\n    <div className='modal-container'>\r\n      <div className='modal-header-container'>\r\n        <h5>Add a New Marker</h5>\r\n        <button id='close-modal-button' onClick={hideModalOnClick}></button>\r\n      </div>\r\n      {renderErrorMessage()}\r\n      <form id='marker-form' className='modal-form' onSubmit={handleAddMarker}>\r\n        <input\r\n          className='form-input'\r\n          type='text'\r\n          placeholder='address'\r\n          value={locationName}\r\n          onChange={({ target }) => setLocationName(target.value)}\r\n        />\r\n        <Dropdownmenu\r\n          dropdownMenuIsOpen={dropdownMenuIsOpen}\r\n          handleResourceChange={handleResourceChange}\r\n          handleDropdownMenuToggle={handleDropdownMenuToggle}\r\n          resources={natureResources}\r\n          chosenResource={chosenResource}\r\n        />\r\n        <label htmlFor='resource-comment' hidden>\r\n          Comment:\r\n        </label>\r\n        <textarea\r\n          id='resource-comment'\r\n          placeholder='write a comment (optional)'\r\n          value={comment}\r\n          onChange={({ target }) => setComment(target.value)}\r\n        ></textarea>\r\n        <input className='modal-form-submit' type='submit' value='Confirm' />\r\n      </form>\r\n    </div>,\r\n    document.getElementById('modal-root')\r\n  );\r\n};\r\n\r\nexport default AddResourceModal;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Map, TileLayer, ZoomControl, Popup, Marker } from 'react-leaflet';\r\nimport NatureResourceMarker from '../natureResourceMarker/natureResourceMarker';\r\nimport LeafletControlButton from '../button/buttonComponent';\r\nimport HortappMenu from '../menu/menuComponent';\r\nimport './mapComponent.css';\r\nimport ModalToggle from '../modal/modalToggleComponent';\r\nimport AddMarkerModal from '../addMarkerModal/addMarkerModalComponent';\r\nimport resourceMarkerService from '../../services/resourceMarkers';\r\nimport userService from '../../services/users';\r\nimport { handleError } from '../../utils/errorHandler';\r\n\r\nconst LeafletMap = () => {\r\n  const mapRef = useRef();\r\n  const markerRef = useRef();\r\n\r\n  const [user, setUser] = useState(null);\r\n\r\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\r\n  const [addMarkerModeIsOn, setAddMarkerModeIsOn] = useState(false);\r\n  const [resourceMarkers, setResourceMarkers] = useState([]);\r\n\r\n  const [mapMaxBounds] = useState([\r\n    [59.44507, 19.08325],\r\n    [70.0988, 31.62826],\r\n  ]);\r\n  const [mapZoom, setMapZoom] = useState('13');\r\n  const [mapPosition, setMapPosition] = useState([60.192059, 24.945831]);\r\n  const [chosenLocation, setChosenLocation] = useState({ lat: null, long: null });\r\n  const [selectedFilterOptions, setSelectedFilterOptions] = useState([\r\n    'berries',\r\n    'mushrooms',\r\n    'greens',\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    getResourceMarkers();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const loggedInUser = userService.getFromStorage('loggedHortappUser');\r\n    if (loggedInUser) {\r\n      const user = JSON.parse(loggedInUser);\r\n      handleUserChange(user);\r\n      resourceMarkerService.setToken(user.token);\r\n    }\r\n  }, []);\r\n\r\n  const handleFilterOptionsChange = (newFilter) => {\r\n    if (selectedFilterOptions.includes(newFilter)) {\r\n      const updatedOptions = selectedFilterOptions.filter((option) => option !== newFilter);\r\n      setSelectedFilterOptions(updatedOptions);\r\n    } else {\r\n      setSelectedFilterOptions(selectedFilterOptions.concat(newFilter));\r\n    }\r\n  };\r\n\r\n  const handleUserChange = (user) => {\r\n    setUser(user);\r\n  };\r\n\r\n  const closeLastOpenedPopup = () => {\r\n    const map = mapRef.current;\r\n    if (map != null) {\r\n      map.leafletElement.closePopup();\r\n    }\r\n  };\r\n\r\n  const getResourceMarkers = async () => {\r\n    try {\r\n      const markers = await resourceMarkerService.getAll();\r\n      setResourceMarkers(markers);\r\n    } catch (error) {\r\n      alert(handleError(error));\r\n      return;\r\n    }\r\n  };\r\n\r\n  const toggleMarkerPointerEvents = () => {\r\n    const map = mapRef.current;\r\n    if (map != null) {\r\n      const markers = document.getElementsByClassName('leaflet-marker-icon');\r\n      for (let i = 0; markers.length > i; i++) {\r\n        addMarkerModeIsOn\r\n          ? (markers[i].style.pointerEvents = 'auto')\r\n          : (markers[i].style.pointerEvents = 'none');\r\n      }\r\n    }\r\n  };\r\n\r\n  const getDeviceLocation = () => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      (position) => {\r\n        setMapPosition([position.coords.latitude, position.coords.longitude]);\r\n        setMapZoom(getCurrentZoomLevel());\r\n      },\r\n      (error) => {\r\n        alert(handleError(error));\r\n      }\r\n    );\r\n  };\r\n\r\n  const onMenuButtonClick = () => {\r\n    closeLastOpenedPopup();\r\n    setMenuIsOpen(!menuIsOpen);\r\n  };\r\n\r\n  const handleAddMarkerModeChange = () => {\r\n    if (addMarkerModeIsOn) {\r\n      emptyChosenLocation();\r\n      toggleMarkerPointerEvents();\r\n      setAddMarkerModeIsOn(false);\r\n    } else {\r\n      toggleMarkerPointerEvents();\r\n      setAddMarkerModeIsOn(true);\r\n    }\r\n  };\r\n\r\n  const confirmationPopupToggle = () => {\r\n    if (addMarkerModeIsOn) {\r\n      if (document.getElementsByClassName('leaflet-popup-content-wrapper').length === 0) {\r\n        const marker = markerRef.current;\r\n        if (marker != null) {\r\n          marker.leafletElement.openPopup();\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  const getLatLngOnClick = (event) => {\r\n    if (addMarkerModeIsOn) {\r\n      setChosenLocation({ lat: event.latlng.lat, long: event.latlng.lng });\r\n      confirmationPopupToggle();\r\n    }\r\n  };\r\n\r\n  const getCurrentZoomLevel = () => {\r\n    const map = mapRef.current;\r\n    if (map !== null) {\r\n      return map.leafletElement.getZoom();\r\n    } else {\r\n      return mapZoom;\r\n    }\r\n  };\r\n\r\n  const emptyChosenLocation = () => {\r\n    setChosenLocation({ lat: null, long: null });\r\n  };\r\n\r\n  const renderHortappMenu = () => {\r\n    return !addMarkerModeIsOn ? (\r\n      <HortappMenu\r\n        onMenuButtonClick={onMenuButtonClick}\r\n        menuIsOpen={menuIsOpen}\r\n        user={user}\r\n        handleUserChange={handleUserChange}\r\n        selectedFilterOptions={selectedFilterOptions}\r\n        handleFilterOptionsChange={handleFilterOptionsChange}\r\n      ></HortappMenu>\r\n    ) : null;\r\n  };\r\n\r\n  const renderNatureResourceMarkers = () => {\r\n    if (resourceMarkers) {\r\n      return resourceMarkers.map((marker) => (\r\n        <NatureResourceMarker\r\n          key={marker.id}\r\n          marker={marker}\r\n          selectedFilterOptions={selectedFilterOptions}\r\n          userId={user ? user.id : null}\r\n        ></NatureResourceMarker>\r\n      ));\r\n    } else {\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const renderLeafletPopup = () => {\r\n    return chosenLocation.lat === null ? null : (\r\n      <Marker ref={markerRef} position={[chosenLocation.lat, chosenLocation.long]}>\r\n        <Popup closeButton={false} closeOnClick={false}>\r\n          <div className='modal-header-container'>\r\n            <h5 id='confirm-modal-header-text'>Confirm chosen location</h5>\r\n          </div>\r\n          <div className='modal-text-container'>\r\n            <p>Do you want to confirm this location:</p>\r\n            <p>\r\n              latitute: <b>{chosenLocation.lat}</b> <br></br>\r\n              longitude: <b>{chosenLocation.long}</b>?\r\n            </p>\r\n          </div>\r\n          <div className='modal-buttons-container'>\r\n            <ModalToggle\r\n              toggle={(showModal) => (\r\n                <button className='confirm-modal-button' onClick={showModal}>\r\n                  Confirm\r\n                </button>\r\n              )}\r\n              content={(hideModal) => {\r\n                closeLastOpenedPopup();\r\n                return (\r\n                  <AddMarkerModal\r\n                    hideModalOnClick={hideModal}\r\n                    chosenLocation={chosenLocation}\r\n                    user={user}\r\n                    updateMarkers={getResourceMarkers}\r\n                    handleAddMarkerModeChange={handleAddMarkerModeChange}\r\n                  ></AddMarkerModal>\r\n                );\r\n              }}\r\n            ></ModalToggle>\r\n            <button className='confirm-modal-button' onClick={emptyChosenLocation}>\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </Popup>\r\n      </Marker>\r\n    );\r\n  };\r\n\r\n  const renderLeafletControlButtons = () => {\r\n    return (\r\n      <>\r\n        <LeafletControlButton\r\n          buttonPosition='bottomright'\r\n          toolTipText='Get your Location'\r\n          buttonId='location-round-button'\r\n          buttonOnClick={getDeviceLocation}\r\n        ></LeafletControlButton>\r\n        {!addMarkerModeIsOn ? (\r\n          user !== null ? (\r\n            <LeafletControlButton\r\n              buttonPosition='bottomright'\r\n              toolTipText='Add a New Marker'\r\n              buttonId='add-round-button'\r\n              buttonOnClick={handleAddMarkerModeChange}\r\n            ></LeafletControlButton>\r\n          ) : null\r\n        ) : (\r\n          <LeafletControlButton\r\n            buttonPosition='bottomright'\r\n            toolTipText='Cancel and go back to map view'\r\n            buttonId='cancel-round-button'\r\n            buttonOnClick={handleAddMarkerModeChange}\r\n          ></LeafletControlButton>\r\n        )}\r\n      </>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {addMarkerModeIsOn && (\r\n        <div id='add-mode-container'>\r\n          <p>Choose a Location</p>\r\n        </div>\r\n      )}\r\n      <div id='modal-root'></div>\r\n      <div id='modal-background' className='hidden-modal-background'></div>\r\n      <Map\r\n        maxBounds={mapMaxBounds}\r\n        id='hortapp-map'\r\n        center={mapPosition}\r\n        zoom={mapZoom}\r\n        minZoom={6}\r\n        maxZoom={15}\r\n        zoomControl={false}\r\n        onClick={getLatLngOnClick}\r\n        ref={mapRef}\r\n      >\r\n        <ZoomControl position='topright'></ZoomControl>\r\n        <TileLayer\r\n          attribution='&copy; <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n          url='https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'\r\n        />\r\n        {renderLeafletControlButtons()}\r\n        {renderNatureResourceMarkers()}\r\n        {renderHortappMenu()}\r\n        {renderLeafletPopup()}\r\n      </Map>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LeafletMap;\r\n","import React from 'react';\r\nimport './App.css';\r\nimport LeafletMap from './components/map/mapComponent';\r\n\r\nconst App = () => {\r\n  return (\r\n    <div className='App'>\r\n      <LeafletMap />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n","const handleError = (error) => {\r\n  let errors = [];\r\n  switch (error.message) {\r\n    case 'Network Error':\r\n      errors.push('Could not fetch markers due to Network Error');\r\n      break;\r\n    case 'User denied geolocation prompt':\r\n      errors.push('Request to get the device location was denied');\r\n      break;\r\n    case 'Missing Address or Resource':\r\n      errors.push('Address and Resource are required');\r\n      break;\r\n    case 'Request failed with status code 401':\r\n      errors.push('Incorrect Username or Password');\r\n      break;\r\n    case 'Missing Username or Password':\r\n      errors.push('Username and Password are required');\r\n      break;\r\n    case 'Missing Username, Password or Email':\r\n      errors.push('Email, Username and Password are required');\r\n      break;\r\n    case 'Short Address':\r\n      errors.push('Address must be at least 6 characters long');\r\n      break;\r\n    case 'Short Username or Password':\r\n      errors.push(\r\n        'Username must be at least 4 characters long and Password must be at least 8 characters long'\r\n      );\r\n      break;\r\n    case 'Short Comment':\r\n      errors.push('Comment must be at least 10 characters long');\r\n      break;\r\n    case 'Incorrect Match':\r\n      errors.push('Password and Confirmation password do not match.');\r\n      break;\r\n    default:\r\n      errors.push(`Error occured: ${error.message}`);\r\n  }\r\n  return errors;\r\n};\r\n\r\nmodule.exports = { handleError };\r\n"],"sourceRoot":""}